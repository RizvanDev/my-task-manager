{"ast":null,"code":"import _objectSpread from\"C:/Users/DarkFlyingCat/Desktop/dev/my-task-manager/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/DarkFlyingCat/Desktop/dev/my-task-manager/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/DarkFlyingCat/Desktop/dev/my-task-manager/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useRef,useContext,useEffect}from'react';import InputContainer from'./InputContainer';import useValue from'../../../../../hooks/useValue';import MainBtn from'../../../../UI/MainBtn/MainBtn';import{Context}from'../../../../../context';import{database}from'../../../../../firebase/firebaseConfig';import'./addCategory.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddCategory=function AddCategory(){var _useValue=useValue(''),_useValue2=_slicedToArray(_useValue,3),inputValue=_useValue2[0],setInputValue=_useValue2[1],onChange=_useValue2[2];var inputRef=useRef(null);var containerRef=useRef(null);var _useContext=useContext(Context),tabItems=_useContext.tabItems,setTabItems=_useContext.setTabItems,setCategory=_useContext.setCategory,containerAddCategory=_useContext.containerAddCategory,showContainerAddCategory=_useContext.showContainerAddCategory,setTab=_useContext.setTab,userInfo=_useContext.userInfo,calendarDate=_useContext.calendarDate,openSideMenu=_useContext.openSideMenu;var toggleInputContainer=function toggleInputContainer(){inputValue&&setInputValue('');setTimeout(function(){return inputRef.current.focus();},300);showContainerAddCategory(!containerAddCategory);};var desiredElement=tabItems.tabs.find(function(tab){return tab.title===inputValue;});var addNewCategory=function addNewCategory(){if(inputValue&&!desiredElement){setInputValue('');var newTab={title:inputValue,sortingType:'newest first',data:[]};var newTabItems=[].concat(_toConsumableArray(tabItems.tabs),[newTab]);setTabItems(_objectSpread(_objectSpread({},tabItems),{},{tabs:newTabItems}));showContainerAddCategory(!containerAddCategory);setCategory(inputValue);setTab(inputValue);openSideMenu(false);return database.writeUserTasksData(userInfo.uid,calendarDate.toLocaleDateString().replaceAll('.',''),newTabItems);}};var handleClickOutside=function handleClickOutside(e){var mainTopBtnEl=e.target.className!=='mainContent__top-btn',mainTopBtnChildEl=e.target.parentElement.className!=='mainContent__top-btn';var anotherOutsideEl=mainTopBtnChildEl&&mainTopBtnEl;if(!containerRef.current.contains(e.target)&&anotherOutsideEl){showContainerAddCategory(false);}};useEffect(function(){document.addEventListener('click',handleClickOutside,{passive:true});return function(){return document.removeEventListener('click',handleClickOutside);};},[containerAddCategory]);return/*#__PURE__*/_jsxs(\"div\",{ref:containerRef,children:[/*#__PURE__*/_jsx(InputContainer,{addNewCategory:addNewCategory,toggleInputContainer:toggleInputContainer,inputValue:inputValue,setInputValue:onChange,visibleContainer:containerAddCategory,desiredElement:desiredElement,ref:inputRef}),/*#__PURE__*/_jsxs(MainBtn,{className:containerAddCategory?'addCategory__btn invisible':'addCategory__btn',type:\"button\",onClick:toggleInputContainer,children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"18\",height:\"18\",fill:\"none\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M14.25 2.25H3.75C2.92157 2.25 2.25 2.92157 2.25 3.75V14.25C2.25 15.0784 2.92157 15.75 3.75 15.75H14.25C15.0784 15.75 15.75 15.0784 15.75 14.25V3.75C15.75 2.92157 15.0784 2.25 14.25 2.25Z\",stroke:\"#29A19C\",strokeWidth:\"1.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M9 6V12\",stroke:\"#29A19C\",strokeWidth:\"1.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M6 9H12\",stroke:\"#29A19C\",strokeWidth:\"1.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})]}),/*#__PURE__*/_jsx(\"span\",{children:\"new category\"})]})]});};export default AddCategory;","map":{"version":3,"names":["useRef","useContext","useEffect","InputContainer","useValue","MainBtn","Context","database","AddCategory","inputValue","setInputValue","onChange","inputRef","containerRef","tabItems","setTabItems","setCategory","containerAddCategory","showContainerAddCategory","setTab","userInfo","calendarDate","openSideMenu","toggleInputContainer","setTimeout","current","focus","desiredElement","tabs","find","tab","title","addNewCategory","newTab","sortingType","data","newTabItems","writeUserTasksData","uid","toLocaleDateString","replaceAll","handleClickOutside","e","mainTopBtnEl","target","className","mainTopBtnChildEl","parentElement","anotherOutsideEl","contains","document","addEventListener","passive","removeEventListener"],"sources":["C:/Users/DarkFlyingCat/Desktop/dev/my-task-manager/src/Components/Layout/AsideBar/CategoryList/AddCategory/AddCategory.jsx"],"sourcesContent":["import { useRef, useContext, useEffect } from 'react'\r\nimport InputContainer from './InputContainer'\r\nimport useValue from '../../../../../hooks/useValue'\r\nimport MainBtn from '../../../../UI/MainBtn/MainBtn'\r\nimport { Context } from '../../../../../context'\r\nimport { database } from '../../../../../firebase/firebaseConfig'\r\nimport './addCategory.scss'\r\n\r\nconst AddCategory = () => {\r\n  const [inputValue, setInputValue, onChange] = useValue('')\r\n  const inputRef = useRef(null)\r\n  const containerRef = useRef(null)\r\n\r\n  const {\r\n    tabItems,\r\n    setTabItems,\r\n    setCategory,\r\n    containerAddCategory,\r\n    showContainerAddCategory,\r\n    setTab,\r\n    userInfo,\r\n    calendarDate,\r\n    openSideMenu,\r\n  } = useContext(Context)\r\n\r\n  const toggleInputContainer = () => {\r\n    inputValue && setInputValue('')\r\n    setTimeout(() => inputRef.current.focus(), 300)\r\n    showContainerAddCategory(!containerAddCategory)\r\n  }\r\n\r\n  const desiredElement = tabItems.tabs.find(tab => tab.title === inputValue)\r\n\r\n  const addNewCategory = () => {\r\n    if (inputValue && !desiredElement) {\r\n      setInputValue('')\r\n\r\n      const newTab = { title: inputValue, sortingType: 'newest first', data: [] }\r\n      const newTabItems = [...tabItems.tabs, newTab]\r\n\r\n      setTabItems({ ...tabItems, tabs: newTabItems })\r\n      showContainerAddCategory(!containerAddCategory)\r\n      setCategory(inputValue)\r\n      setTab(inputValue)\r\n      openSideMenu(false)\r\n\r\n      return database.writeUserTasksData(\r\n        userInfo.uid,\r\n        calendarDate.toLocaleDateString().replaceAll('.', ''),\r\n        newTabItems,\r\n      )\r\n    }\r\n  }\r\n\r\n  const handleClickOutside = e => {\r\n    const mainTopBtnEl = e.target.className !== 'mainContent__top-btn',\r\n      mainTopBtnChildEl = e.target.parentElement.className !== 'mainContent__top-btn'\r\n\r\n    const anotherOutsideEl = mainTopBtnChildEl && mainTopBtnEl\r\n\r\n    if (!containerRef.current.contains(e.target) && anotherOutsideEl) {\r\n      showContainerAddCategory(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener('click', handleClickOutside, { passive: true })\r\n    return () => document.removeEventListener('click', handleClickOutside)\r\n  }, [containerAddCategory])\r\n\r\n  return (\r\n    <div ref={containerRef}>\r\n      <InputContainer\r\n        addNewCategory={addNewCategory}\r\n        toggleInputContainer={toggleInputContainer}\r\n        inputValue={inputValue}\r\n        setInputValue={onChange}\r\n        visibleContainer={containerAddCategory}\r\n        desiredElement={desiredElement}\r\n        ref={inputRef}\r\n      />\r\n\r\n      <MainBtn\r\n        className={containerAddCategory ? 'addCategory__btn invisible' : 'addCategory__btn'}\r\n        type='button'\r\n        onClick={toggleInputContainer}>\r\n        <svg width='18' height='18' fill='none'>\r\n          <path\r\n            d='M14.25 2.25H3.75C2.92157 2.25 2.25 2.92157 2.25 3.75V14.25C2.25 15.0784 2.92157 15.75 3.75 15.75H14.25C15.0784 15.75 15.75 15.0784 15.75 14.25V3.75C15.75 2.92157 15.0784 2.25 14.25 2.25Z'\r\n            stroke='#29A19C'\r\n            strokeWidth='1.5'\r\n            strokeLinecap='round'\r\n            strokeLinejoin='round'\r\n          />\r\n          <path\r\n            d='M9 6V12'\r\n            stroke='#29A19C'\r\n            strokeWidth='1.5'\r\n            strokeLinecap='round'\r\n            strokeLinejoin='round'\r\n          />\r\n          <path\r\n            d='M6 9H12'\r\n            stroke='#29A19C'\r\n            strokeWidth='1.5'\r\n            strokeLinecap='round'\r\n            strokeLinejoin='round'\r\n          />\r\n        </svg>\r\n        <span>new category</span>\r\n      </MainBtn>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddCategory\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}