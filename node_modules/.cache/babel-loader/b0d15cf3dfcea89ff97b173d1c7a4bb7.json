{"ast":null,"code":"import { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { getDatabase, ref, set, get, child } from 'firebase/database';\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID\n};\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getDatabase(app);\nlet userId = ''; // database\n\nconst database = {\n  writeUserData: async (userInfo, data) => {\n    return await set(ref(db, 'users/' + userId), {\n      username: userInfo.nick,\n      email: userInfo.email,\n      profile_picture: userInfo.photo,\n      userData: data\n    });\n  },\n  readUserData: async (setUserInfo, setTabItem) => {\n    try {\n      const snapshot = await get(child(ref(db), `users/${userId}`));\n\n      if (snapshot.exists()) {\n        const userData = snapshot.val();\n        setUserInfo({\n          photo: userData.profile_picture,\n          nick: userData.username,\n          email: userData.email\n        });\n        setTabItem(userData.userData);\n      } else {\n        console.log('No data available');\n      }\n    } catch (Error) {\n      console.error(Error);\n    }\n  }\n}; // Authentication methods\n\nconst authentication = {\n  // Login\n  loginEmailPassword: async _ref => {\n    let { ...params\n    } = _ref;\n\n    if (params.login.Password) {\n      try {\n        await signInWithEmailAndPassword(auth, params.login.Email, params.login.Password);\n        params.setLogin({\n          Email: '',\n          Password: ''\n        });\n        setTimeout(() => {\n          params.setAuthModal(false);\n        }, 1000);\n        params.createAuthInfoModal({\n          modal: true,\n          type: 'Success',\n          text: 'Authorization successfully'\n        });\n      } catch (Error) {\n        params.createAuthInfoModal({\n          modal: true,\n          type: 'Error',\n          text: Error.code\n        });\n      }\n    }\n  },\n  // Registration\n  registrationEmailPassword: async _ref2 => {\n    let { ...params\n    } = _ref2;\n\n    if (params.registration.Password) {\n      try {\n        await createUserWithEmailAndPassword(auth, params.registration.Email, params.registration.Password);\n        params.setRegistration({\n          Email: '',\n          Password: ''\n        });\n        setTimeout(() => {\n          params.setAuthModal(false);\n          params.navigate('Profile.jsx');\n        }, 1000);\n        params.createAuthInfoModal({\n          modal: true,\n          type: 'Success',\n          text: 'Registration successfully'\n        });\n      } catch (Error) {\n        params.createAuthInfoModal({\n          modal: true,\n          type: 'Error',\n          text: Error.code\n        });\n      }\n    }\n  },\n  // State\n  monitorAuthState: async (setAuthorization, userInfo, setUserInfo, userId) => {\n    onAuthStateChanged(auth, user => {\n      if (user) {\n        userId = user.uid;\n        setAuthorization(true);\n        setUserInfo({ ...userInfo,\n          email: user.email\n        });\n      } else {\n        setAuthorization(false);\n        setUserInfo({ ...userInfo,\n          email: ''\n        });\n      }\n    });\n  },\n  // Logout\n  logOut: async () => await signOut(auth)\n};\nexport { authentication, database };","map":{"version":3,"names":["initializeApp","getAuth","signInWithEmailAndPassword","createUserWithEmailAndPassword","onAuthStateChanged","signOut","getDatabase","ref","set","get","child","firebaseConfig","apiKey","process","env","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","databaseURL","REACT_APP_FIREBASE_DATABASE_URL","projectId","REACT_APP_FIREBASE_PROJECT_ID","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","appId","REACT_APP_FIREBASE_APP_ID","app","auth","db","userId","database","writeUserData","userInfo","data","username","nick","email","profile_picture","photo","userData","readUserData","setUserInfo","setTabItem","snapshot","exists","val","console","log","Error","error","authentication","loginEmailPassword","params","login","Password","Email","setLogin","setTimeout","setAuthModal","createAuthInfoModal","modal","type","text","code","registrationEmailPassword","registration","setRegistration","navigate","monitorAuthState","setAuthorization","user","uid","logOut"],"sources":["C:/Users/DarkFlyingCat/Desktop/dev/my-task-manager/src/firebase/firebaseConfig.js"],"sourcesContent":["import { initializeApp } from 'firebase/app'\r\nimport {\r\n  getAuth,\r\n  signInWithEmailAndPassword,\r\n  createUserWithEmailAndPassword,\r\n  onAuthStateChanged,\r\n  signOut,\r\n} from 'firebase/auth'\r\nimport { getDatabase, ref, set, get, child } from 'firebase/database'\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n}\r\n\r\nconst app = initializeApp(firebaseConfig)\r\nconst auth = getAuth(app)\r\nconst db = getDatabase(app)\r\n\r\nlet userId = ''\r\n\r\n// database\r\nconst database = {\r\n  writeUserData: async (userInfo, data) => {\r\n    return await set(ref(db, 'users/' + userId), {\r\n      username: userInfo.nick,\r\n      email: userInfo.email,\r\n      profile_picture: userInfo.photo,\r\n      userData: data,\r\n    })\r\n  },\r\n  readUserData: async (setUserInfo, setTabItem) => {\r\n    try {\r\n      const snapshot = await get(child(ref(db), `users/${userId}`))\r\n      if (snapshot.exists()) {\r\n        const userData = snapshot.val()\r\n        setUserInfo({\r\n          photo: userData.profile_picture,\r\n          nick: userData.username,\r\n          email: userData.email,\r\n        })\r\n        setTabItem(userData.userData)\r\n      } else {\r\n        console.log('No data available')\r\n      }\r\n    } catch (Error) {\r\n      console.error(Error)\r\n    }\r\n  },\r\n}\r\n\r\n// Authentication methods\r\nconst authentication = {\r\n  // Login\r\n  loginEmailPassword: async ({ ...params }) => {\r\n    if (params.login.Password) {\r\n      try {\r\n        await signInWithEmailAndPassword(auth, params.login.Email, params.login.Password)\r\n\r\n        params.setLogin({ Email: '', Password: '' })\r\n\r\n        setTimeout(() => {\r\n          params.setAuthModal(false)\r\n        }, 1000)\r\n\r\n        params.createAuthInfoModal({\r\n          modal: true,\r\n          type: 'Success',\r\n          text: 'Authorization successfully',\r\n        })\r\n      } catch (Error) {\r\n        params.createAuthInfoModal({ modal: true, type: 'Error', text: Error.code })\r\n      }\r\n    }\r\n  },\r\n  // Registration\r\n  registrationEmailPassword: async ({ ...params }) => {\r\n    if (params.registration.Password) {\r\n      try {\r\n        await createUserWithEmailAndPassword(\r\n          auth,\r\n          params.registration.Email,\r\n          params.registration.Password,\r\n        )\r\n\r\n        params.setRegistration({ Email: '', Password: '' })\r\n\r\n        setTimeout(() => {\r\n          params.setAuthModal(false)\r\n          params.navigate('Profile.jsx')\r\n        }, 1000)\r\n\r\n        params.createAuthInfoModal({\r\n          modal: true,\r\n          type: 'Success',\r\n          text: 'Registration successfully',\r\n        })\r\n      } catch (Error) {\r\n        params.createAuthInfoModal({ modal: true, type: 'Error', text: Error.code })\r\n      }\r\n    }\r\n  },\r\n  // State\r\n  monitorAuthState: async (setAuthorization, userInfo, setUserInfo, userId) => {\r\n    onAuthStateChanged(auth, user => {\r\n      if (user) {\r\n        userId = user.uid\r\n        setAuthorization(true)\r\n        setUserInfo({ ...userInfo, email: user.email })\r\n      } else {\r\n        setAuthorization(false)\r\n        setUserInfo({ ...userInfo, email: '' })\r\n      }\r\n    })\r\n  },\r\n  // Logout\r\n  logOut: async () => await signOut(auth),\r\n}\r\n\r\nexport { authentication, database }\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}